{"_id":"DJcBwpF0E7dq1PmU","_stats":{"compendiumSource":null,"coreVersion":"13.348","createdTime":1764988339048,"duplicateSource":"Macro.Z5z5kHno1LTnrHYx","exportSource":null,"lastModifiedBy":"EyCKp1ZSX9rk44u9","modifiedTime":1764996291230,"systemId":"pokerole","systemVersion":"0.5.0"},"author":"EyCKp1ZSX9rk44u9","command":"let actorData = canvas.tokens.controlled[0].actor;\nlet spec = actorData.system.species;\nlet number = actorData.system.pokedexId;\nlet compendium = game.packs.get(\"pokerole.pokemon\");\nlet macroID = compendium.index.find(t => t.name == spec);\nlet resetData = await compendium.getDocument(macroID?._id)\nif (macroID && number==resetData.system.pokedexId) {\n  await actorData.update(\n    {\"system.attributes.strength\" : resetData.system.attributes.strength,\n    \"system.attributes.dexterity\" : resetData.system.attributes.dexterity,\n    \"system.attributes.vitality\" : resetData.system.attributes.vitality,\n    \"system.attributes.special\" : resetData.system.attributes.special,\n    \"system.attributes.insight\" : resetData.system.attributes.insight}\n  );\n  \n  for (items of actorData.items.filter(t => t.type == \"move\" || t.type == \"ability\")){\n    items.delete()\n  }\n  await actorData.createEmbeddedDocuments('Item',resetData.items.filter(t => t.type == \"move\" || t.type == \"ability\"))\n  \n  ui.notifications.info(actorData.name + \" is restarted\");\n} else {\n  ui.notifications.warn(\"No information was found on POKEROLE Compendium\");\n}","flags":{"macro-wheel":{"activeCondition":""}},"folder":"M7pZGOU8X5ny5Fy8","img":"systems/pokerole/images/icons/Ranks/5.png","name":"Reworking","ownership":{"default":0,"EyCKp1ZSX9rk44u9":3},"scope":"global","sort":175000,"type":"script"}
{"_id":"lGJ6PxWi5xLNinRX","_stats":{"compendiumSource":"Macro.lGJ6PxWi5xLNinRX","coreVersion":"13.348","createdTime":1764999202057,"duplicateSource":"Macro.GLPbYdL7VDNrZe0p","exportSource":null,"lastModifiedBy":"EyCKp1ZSX9rk44u9","modifiedTime":1764999240006,"systemId":"pokerole","systemVersion":"0.5.0"},"author":"EyCKp1ZSX9rk44u9","command":"let target = game.user.targets.map(({ actor }) => actor); \n\nlet messageContent = ``;\n\nlet weakfolderimg = `<img width=\"30px\" height=\"30px\" style=\"border: 0px solid #555\" src=\"Pokerole%20Assets/Resources/Pokeweak/`;\nlet typefolderimg = `<img width=\"20px\" height=\"20px\" style=\"border: 0px solid #555\" src=\"systems/pokerole/images/types/`;\nlet pstyle = `style=\" display: flex; align-items: center; justify-content: flex-start; font-size: 20px; gap: 2px;\"`;\n\nlet matchs = ``;\n\nfor (const pokemon of target) {\n\n\tmessageContent = `<h2>#${pokemon.system.pokedexId} - ${pokemon.system.species}</h2><p ${pstyle}>`;\n\t\n\tif (pokemon.system.pokedexId != null && pokemon.system.ishuman != true){\n\n\tmatchs = game.pokerole.APIdb.pokemonMatchup(pokemon);\n\n\tmessageContent += `${weakfolderimg}X4.svg\">: `\n\tfor (const type of matchs.doubleWeak) {messageContent += `${typefolderimg}` + `${type}.svg\">`};\n\n\tmessageContent += `</p><p ${pstyle} >${weakfolderimg}X2.svg\">: `\n\tfor (const type of matchs.weak) {messageContent += `${typefolderimg}` + `${type}.svg\">`};\n\n\tmessageContent += `</p><p ${pstyle} >${weakfolderimg}1-2.svg\">: `\n\tfor (const type of matchs.resist) {messageContent += `${typefolderimg}` + `${type}.svg\">`};\n\n\tmessageContent += `</p><p ${pstyle} >${weakfolderimg}1-4.svg\">: `\n\tfor (const type of matchs.doubleResist) {messageContent += `${typefolderimg}` + `${type}.svg\">`};\n\n\tmessageContent += `</p><p ${pstyle} >${weakfolderimg}X0.svg\">: `\n\tfor (const type of matchs.immune) {messageContent += `${typefolderimg}` + `${type}.svg\">`};\n\n\t};\n\n\tmessageContent += `</p>`\n\n\tChatMessage.create({\n            \tspeaker: ChatMessage.getSpeaker(),\n            \tcontent: messageContent\n\t});\t\n};","flags":{"macro-wheel":{"activeCondition":""}},"folder":null,"img":"systems/pokerole/images/icons/matchups/X2.svg","name":"Pokematch","ownership":{"default":2,"EyCKp1ZSX9rk44u9":3},"scope":"global","sort":-100000,"type":"script"}
